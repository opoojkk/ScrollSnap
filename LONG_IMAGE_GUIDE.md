# 🎉 ScrollSnap 长图拼接功能使用指南

## 新功能：自动拼接长图！

现在 ScrollSnap 会自动将滚动过程中捕获的多个画面拼接成**一张完整的长图**！

## 🚀 快速开始

### 1. 重新加载扩展

```
访问 chrome://extensions/
找到 ScrollSnap 扩展
点击刷新按钮 🔄
```

### 2. 使用流程

#### ① 选择区域
- 点击扩展图标
- 点击"选择区域"
- 在页面上拖动选择要截图的区域
- 点击"✓ 确认选择"

#### ② 开始截图
- 再次点击扩展图标
- 点击"开始截图"
- 看到提示："📸 长图模式已开启，滚动页面将自动拼接"

#### ③ 滚动页面
- 慢慢滚动页面（向下滚动）
- 每次滚动停止后会自动捕获一帧
- 右上角显示："✓ 已捕获 N 帧画面"

**重要提示**：
- 滚动速度要适中，不要太快
- 确保每次滚动有一定重叠（推荐滚动半屏或三分之二屏）
- 滚动方向保持一致（建议只向下或只向上）

#### ④ 停止并下载
- 滚动到目标位置后，点击"停止截图"
- 点击"下载长图"
- 看到提示："🔄 正在拼接长图，请稍候..."
- 几秒钟后看到："✓ 长图已生成并下载！"
- 检查下载文件夹，找到 `scrollsnap_long_时间戳.png`

## 🎯 最佳实践

### 推荐设置

1. **选择区域大小**：
   - 宽度：选择你需要的内容宽度（如文章主体部分）
   - 高度：选择浏览器可见区域的高度（不要太小）

2. **滚动建议**：
   - 每次滚动距离：半屏到三分之二屏
   - 滚动间隔：等待 0.5-1 秒让页面稳定
   - 滚动方向：保持向下或向上，不要来回滚动

3. **测试页面推荐**：
   - 维基百科文章：https://zh.wikipedia.org
   - 长博客文章
   - 文档页面
   - 新闻网站

### 示例：捕获维基百科文章

```
1. 打开 https://zh.wikipedia.org/wiki/人工智能
2. 启动 ScrollSnap，选择文章内容区域
3. 开始截图
4. 从顶部慢慢滚动到底部（每次滚动 50-70%）
5. 停止截图
6. 下载长图
7. 获得完整文章的长图！
```

## 🔍 工作原理

### 拼接算法

1. **捕获阶段**：
   - 每次滚动停止时捕获选定区域
   - 记录当前的 scrollY 位置
   - 将截图和位置信息存储

2. **拼接阶段**：
   - 按 scrollY 位置排序所有画面
   - 计算相邻画面的滚动距离
   - 创建大画布（高度 = 所有滚动距离之和）
   - 按照滚动位置依次绘制每一帧
   - 生成完整的长图

3. **示例计算**：
```
假设捕获了 3 帧：
- 第 1 帧：scrollY = 0，高度 600px
- 第 2 帧：scrollY = 400，高度 600px（重叠 200px）
- 第 3 帧：scrollY = 800，高度 600px（重叠 200px）

拼接后长图高度 = 600 + 400 + 400 = 1400px
```

## 🐛 故障排除

### 问题：拼接的长图有断层

**原因**：滚动距离太大，画面之间没有重叠

**解决**：
- 减小每次滚动的距离
- 确保相邻画面有一定重叠

### 问题：长图太长或太短

**原因**：滚动方式不一致

**解决**：
- 保持匀速滚动
- 不要来回滚动
- 从起点一直滚动到终点

### 问题：拼接失败，下载了多张独立图片

**原因**：拼接过程出错（罕见）

**解决**：
- 查看 Console 的错误信息
- 重试一次
- 如果持续失败，提交 Issue

### 问题：长图质量不清晰

**原因**：显示器分辨率或浏览器缩放

**解决**：
- 使用 100% 浏览器缩放
- 高分辨率显示器会生成更清晰的图片

## 📊 性能说明

- **内存使用**：每帧约 100KB-500KB（取决于区域大小）
- **推荐帧数**：10-50 帧（可生成 5000-30000px 高的长图）
- **最大支持**：理论上无限，但建议不超过 100 帧
- **处理时间**：10 帧约 1-2 秒，50 帧约 5-10 秒

## 💡 进阶技巧

### 技巧 1：精确控制滚动

使用键盘方向键代替鼠标滚轮：
- `↓` 键：向下滚动固定距离
- `PageDown` 键：向下滚动一页

### 技巧 2：捕获整个页面

1. 选择区域：浏览器的整个内容区域
2. 从页面顶部开始
3. 滚动到底部
4. 生成整个页面的长图

### 技巧 3：只捕获特定列

网页通常有多列布局，你可以：
1. 只选择文章主体列
2. 忽略侧边栏和广告
3. 生成纯净的内容长图

## 🎨 使用案例

### 案例 1：长文章分享
- 捕获完整博客文章
- 生成长图分享到社交媒体
- 保留原始排版和样式

### 案例 2：教程制作
- 捕获操作步骤
- 生成教程长图
- 一图展示完整流程

### 案例 3：数据表格
- 捕获长数据表格
- 拼接成完整视图
- 便于打印或分享

### 案例 4：聊天记录
- 捕获完整对话
- 保存为长图
- 永久保存记录

## 📞 反馈与支持

遇到问题或有建议？
- 查看 `DEBUG.md` 调试指南
- 提交 GitHub Issue
- 分享你的使用体验

---

**开始创造你的长图吧！** 📸✨
